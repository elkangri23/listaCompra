# üõí Lista de la Compra Colaborativa

> Proyecto educativo de backend desarrollado con **Node.js + TypeScript**, aplicando **arquitectura limpia (hexagonal)**, **patr√≥n Outbox**, **mensajer√≠a as√≠ncrona con RabbitMQ** e integraci√≥n de **Inteligencia Artificial**.

[![TypeScript](https://img.shields.io/badge/TypeScript-5.x-blue.svg)](https://www.typescriptlang.org/)
[![Node.js](https://img.shields.io/badge/Node.js-v20+-green.svg)](https://nodejs.org/)
[![PostgreSQL](https://img.shields.io/badge/PostgreSQL-15+-blue.svg)](https://www.postgresql.org/)
[![RabbitMQ](https://img.shields.io/badge/RabbitMQ-3.x-orange.svg)](https://www.rabbitmq.com/)
[![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg)](https://opensource.org/licenses/MIT)

---

## üìñ Tabla de Contenidos

- [Descripci√≥n del Proyecto](#-descripci√≥n-del-proyecto)
- [Documentaci√≥n](#-documentaci√≥n)
- [Caracter√≠sticas Principales](#-caracter√≠sticas-principales)
- [Arquitectura](#-arquitectura)
- [Stack Tecnol√≥gico](#-stack-tecnol√≥gico)
- [Requisitos Previos](#-requisitos-previos)
- [Instalaci√≥n y Configuraci√≥n](#-instalaci√≥n-y-configuraci√≥n)
- [Estructura del Proyecto](#-estructura-del-proyecto)
- [Casos de Uso](#-casos-de-uso)
- [Roadmap de Desarrollo](#-roadmap-de-desarrollo)
- [Testing](#-testing)
- [API Documentation](#-api-documentation)
- [Contribuci√≥n](#-contribuci√≥n)
- [Licencia](#-licencia)

---

## üìù Descripci√≥n del Proyecto

Sistema backend de gesti√≥n de **listas de compra colaborativas** que permite a los usuarios:
- Crear y gestionar listas de compra asociadas a tiendas espec√≠ficas
- Compartir listas con otros usuarios mediante enlaces seguros
- Organizar productos por categor√≠as/pasillos personalizables
- Recibir sugerencias inteligentes mediante IA
- Analizar patrones y h√°bitos de compra

El proyecto es un ejercicio educativo avanzado desarrollado como parte del **M√°ster de Desarrollo con IA de Big School** (Brais Moure), enfocado en la aplicaci√≥n pr√°ctica de:
- Arquitectura limpia y hexagonal
- Principios SOLID
- Patr√≥n Outbox para consistencia eventual
- Mensajer√≠a as√≠ncrona con RabbitMQ
- Integraci√≥n de APIs de Inteligencia Artificial
- Testing exhaustivo (unitario, integraci√≥n, E2E)

---

## üìö Documentaci√≥n

| Documento | Descripci√≥n |
|-----------|-------------|
| [`./Doc/Analisis-de-requisitos-ListaCompra.pdf`](./Doc/Analisis-de-requisitos-ListaCompra.pdf) | An√°lisis de requisitos funcionales y no funcionales completo |
| [`./Doc/DiagramaClases_V1-mermaid.md`](./Doc/DiagramaClases_V1-mermaid.md) | Diagrama de clases UML en formato Mermaid |
| [`./Doc/casos-uso-completos.md`](./Doc/casos-uso-completos.md) | 27 casos de uso detallados con flujos principales y alternativos |
| [`AGENTS-v2.md`](./AGENTS-v2.md) | Gu√≠a completa de arquitectura, roadmap y agentes de desarrollo |

---

## ‚ú® Caracter√≠sticas Principales

### Gesti√≥n de Usuarios
- ‚úÖ Registro y autenticaci√≥n con JWT
- ‚úÖ Roles diferenciados (Usuario Normal, Invitado, Administrador)
- ‚úÖ Encriptaci√≥n segura de contrase√±as (bcrypt)

### Gesti√≥n de Listas
- ‚úÖ CRUD completo de listas de compra
- ‚úÖ Asociaci√≥n de listas a tiendas espec√≠ficas
- ‚úÖ Marcar productos como comprados
- ‚úÖ Creaci√≥n de blueprints/plantillas reutilizables

### Colaboraci√≥n
- ‚úÖ Compartir listas mediante enlaces seguros con hash criptogr√°fico
- ‚úÖ Permisos granulares (lectura / lectura-escritura)
- ‚úÖ Acceso de invitados sin necesidad de registro
- ‚úÖ Notificaciones por email mediante eventos as√≠ncronos

### Categorizaci√≥n
- ‚úÖ Categor√≠as/pasillos personalizables por usuario
- ‚úÖ Categor√≠as predefinidas por tienda
- ‚úÖ Asociaci√≥n opcional de productos a categor√≠as

### Inteligencia Artificial
- ‚úÖ Sugerencias de categor√≠as por tienda mediante IA
- ‚úÖ An√°lisis de h√°bitos de compra
- ‚úÖ Integraci√≥n con OpenAI/Gemini/Perplexity

### Administraci√≥n
- ‚úÖ Impersonaci√≥n de usuarios para testing
- ‚úÖ Logs de auditor√≠a
- ‚úÖ Gesti√≥n de permisos y roles

---

## üèóÔ∏è Arquitectura

El proyecto sigue los principios de **Clean Architecture** y **Arquitectura Hexagonal**, garantizando:

- **Independencia del framework**: La l√≥gica de negocio no depende de Express/Fastify
- **Independencia de la base de datos**: Se puede cambiar PostgreSQL sin afectar el dominio
- **Independencia de servicios externos**: IA y email son intercambiables
- **Testeable**: Cada capa puede probarse de forma aislada
- **Mantenible**: Separaci√≥n clara de responsabilidades

### Capas de la Arquitectura

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                     ADAPTERS                        ‚îÇ
‚îÇ  (HTTP Controllers, Routes, Middlewares)            ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                     ‚îÇ
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                  APPLICATION                        ‚îÇ
‚îÇ  (Use Cases, DTOs, Ports/Interfaces)                ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                     ‚îÇ
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                    DOMAIN                           ‚îÇ
‚îÇ  (Entities, Value Objects, Domain Services)         ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                     ‚ñ≤
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                INFRASTRUCTURE                       ‚îÇ
‚îÇ  (Repositories, RabbitMQ, Email, AI Services)       ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### Patr√≥n Outbox

Implementa consistencia eventual mediante:
1. **Outbox Table**: Almacena eventos de dominio en la misma transacci√≥n
2. **Worker/Poller**: Procesa eventos pendientes de forma as√≠ncrona
3. **RabbitMQ**: Publica eventos a consumers externos
4. **Consumers**: Procesan eventos (notificaciones, auditor√≠a, etc.)

---

## üõ†Ô∏è Stack Tecnol√≥gico - Estado Real

### ‚úÖ **Implementado y Funcionando**

#### Backend
- **Runtime**: Node.js v16.17.0+ ‚úÖ
- **Lenguaje**: TypeScript 5.x ‚úÖ
- **Framework Web**: Express ‚úÖ
- **Validaci√≥n**: Zod ‚úÖ

#### Persistencia
- **Base de datos**: PostgreSQL 15+ con Docker ‚úÖ
- **ORM**: Prisma 5.x ‚úÖ
- **Migraciones**: Prisma Migrate ‚úÖ

#### Mensajer√≠a
- **Broker**: RabbitMQ 3.x con Docker ‚úÖ
- **Cliente**: amqplib ‚úÖ
- **Patr√≥n Outbox**: Implementado y funcionando ‚úÖ

#### Autenticaci√≥n y Seguridad
- **Tokens**: JWT (jsonwebtoken) ‚úÖ
- **Encriptaci√≥n**: bcrypt ‚úÖ
- **Arquitectura**: Event-driven con eventos de dominio ‚úÖ

#### Testing
- **Framework**: Jest con 149 tests pasando ‚úÖ
- **API Testing**: Supertest ‚úÖ
- **Cobertura**: >90% en capas core ‚úÖ

### ‚è≥ **Planificado para Fases Futuras**

#### Documentaci√≥n y Observabilidad
- **API**: Swagger/OpenAPI (Fase 13)
- **Logging avanzado**: Winston (mejora pendiente)
- **M√©tricas**: Prometheus (Fase 12)
- **Tracing**: OpenTelemetry (Fase 12)

#### Servicios Externos
- **Email**: Nodemailer (Fase 8)
- **Seguridad HTTP**: Helmet (Fase 12)
- **Rate Limiting**: express-rate-limit (Fase 12)

#### Inteligencia Artificial
- **OpenAI API** (Fase 9)
- **Google Gemini** (Fase 9)
- **Perplexity AI** (Fase 9)
- **Azure OpenAI** (Fase 9)

### Testing
- **Framework**: Jest
- **API Testing**: Supertest
- **Cobertura**: >80%

### Calidad de C√≥digo
- **TypeScript**: Strict mode habilitado con `exactOptionalPropertyTypes`
- **Result Pattern**: Manejo funcional de errores implementado
- **Arquitectura Hexagonal**: Separaci√≥n estricta de capas
- **Pre-commit**: Verificaci√≥n de compilaci√≥n TypeScript

### Documentaci√≥n y Observabilidad
- **API**: Swagger/OpenAPI (planificado para Fase 13)
- **Logs**: Console logging estructurado (Winston planificado)
- **Observabilidad**: M√©tricas y tracing (planificado)

---

## üìã Requisitos Previos

Antes de comenzar, aseg√∫rate de tener instalado:

- **Node.js** v20 o superior: [Descargar aqu√≠](https://nodejs.org/)
- **npm** o **yarn**: Incluido con Node.js
- **Docker Desktop**: [Descargar aqu√≠](https://www.docker.com/products/docker-desktop/) (para PostgreSQL y RabbitMQ)
- **Git**: [Descargar aqu√≠](https://git-scm.com/)

---

## üöÄ Instalaci√≥n y Configuraci√≥n

### 1. Clonar el repositorio

```bash
git clone https://github.com/tu-usuario/lista-compra-colaborativa.git
cd lista-compra-colaborativa
```

### 2. Instalar dependencias

```bash
npm install
```

### 3. Levantar servicios con Docker

#### PostgreSQL
```bash
docker run -d \
  --name postgres \
  -e POSTGRES_USER=postgres \
  -e POSTGRES_PASSWORD=password \
  -e POSTGRES_DB=lista_compra \
  -p 5432:5432 \
  -v ./postgres-data:/var/lib/postgresql/data \
  postgres:15
```

#### RabbitMQ
```bash
docker run -d \
  --name rabbitmq \
  -p 5672:5672 \
  -p 15672:15672 \
  rabbitmq:management
```

**Panel de administraci√≥n RabbitMQ**: http://localhost:15672 (guest/guest)

### 4. Configurar variables de entorno

Copia el archivo de ejemplo y configura tus valores:

```bash
cp .env.example .env
```

Edita `.env`:

```env
# Database
DATABASE_URL=postgresql://postgres:password@localhost:5432/lista_compra

# RabbitMQ
RABBITMQ_URL=amqp://guest:guest@localhost:5672

# JWT
JWT_SECRET=tu_secreto_super_seguro
JWT_EXPIRATION=24h

# API Server
PORT=3000
NODE_ENV=development

# OpenAI (opcional)
OPENAI_API_KEY=tu_api_key_aqui

# Email (opcional)
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USER=tu_email@gmail.com
SMTP_PASS=tu_contrase√±a
```

### 5. Generar Prisma Client y ejecutar migraciones

```bash
npx prisma generate
npx prisma migrate dev
```

### 6. (Opcional) Poblar datos iniciales

```bash
npx prisma db seed
```

### 7. Iniciar el servidor

```bash
# Modo desarrollo (con hot reload)
npm run dev

# Modo producci√≥n
npm run build
npm start
```

El servidor estar√° disponible en: **http://localhost:3000**

---

## üìÅ Estructura del Proyecto

```
/
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ domain/                      # L√≥gica de negocio pura
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ entities/                # Usuario, Lista, Producto, etc.
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ value-objects/           # Email, Password, Hash
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ services/                # Domain services
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ events/                  # Eventos de dominio
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ errors/                  # Errores de dominio
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ application/                 # Casos de uso
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ use-cases/               # 27 casos de uso organizados
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ports/                   # Interfaces (repositorios, servicios)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ dto/                     # DTOs entrada/salida
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ errors/                  # Errores de aplicaci√≥n
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ infrastructure/              # Adaptadores
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ persistence/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ prisma/              # Schema y migraciones
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ repositories/        # Implementaciones Prisma
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ mappers/             # Mapeo entidad ‚Üî modelo
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ in-memory/           # Repositorios fake para testing
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ http/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ controllers/         # Controladores REST
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ middlewares/         # Auth, validaci√≥n, errors
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ routes/              # Definici√≥n de rutas
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ server.ts            # Bootstrap del servidor
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ messaging/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ rabbitmq/            # Conexi√≥n, publisher, consumer
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ outbox/              # Servicio outbox y worker
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ consumers/           # Consumers espec√≠ficos
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ external-services/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ai/                  # OpenAI, Gemini, etc.
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ email/               # Nodemailer
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ auth/                # JWT, bcrypt
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ observability/           # Logger, metrics, tracing
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ config/                  # Configuraci√≥n por m√≥dulo
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ composition/                 # Inyecci√≥n de dependencias
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ container.ts
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ shared/                      # Utilidades compartidas
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ result.ts                # Result/Either
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ types.ts
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ utils.ts
‚îÇ   ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ main.ts                      # Punto de entrada
‚îÇ
‚îú‚îÄ‚îÄ tests/
‚îÇ   ‚îú‚îÄ‚îÄ unit/
‚îÇ   ‚îú‚îÄ‚îÄ integration/
‚îÇ   ‚îî‚îÄ‚îÄ e2e/
‚îÇ
‚îú‚îÄ‚îÄ docs/                            # Documentaci√≥n
‚îÇ   ‚îú‚îÄ‚îÄ Analisis-de-requisitos-ListaCompra.pdf
‚îÇ   ‚îú‚îÄ‚îÄ DiagramaClases_V1-mermaid.md
‚îÇ   ‚îî‚îÄ‚îÄ casos-uso-completos.md
‚îÇ
‚îú‚îÄ‚îÄ .env.example
‚îú‚îÄ‚îÄ docker-compose.yml
‚îú‚îÄ‚îÄ package.json
‚îú‚îÄ‚îÄ tsconfig.json
‚îú‚îÄ‚îÄ jest.config.js
‚îú‚îÄ‚îÄ AGENTS-v2.md
‚îî‚îÄ‚îÄ README.md
```

---

## üìù Casos de Uso

El sistema implementa **27 casos de uso** completos organizados en m√≥dulos:

### Autenticaci√≥n (2)
- CU-01: Registro de Usuario
- CU-02: Autenticaci√≥n de Usuario

### Gesti√≥n de Listas (4)
- CU-03: Crear Lista de la Compra
- CU-04: Obtener Listas del Usuario
- CU-05: Actualizar Lista
- CU-06: Eliminar Lista

### Gesti√≥n de Productos (4)
- CU-07: Agregar Producto a Lista
- CU-08: Marcar/Desmarcar Producto como Comprado
- CU-09: Modificar Producto
- CU-10: Eliminar Producto

### Gesti√≥n de Categor√≠as (4)
- CU-11: Crear Categor√≠a
- CU-12: Obtener Categor√≠as de Tienda
- CU-13: Actualizar Categor√≠a
- CU-14: Eliminar Categor√≠a

### Compartici√≥n y Colaboraci√≥n (4)
- CU-15: Compartir Lista (Generar Enlace)
- CU-16: Acceder a Lista Compartida
- CU-17: Gestionar Permisos
- CU-18: Cancelar Invitaci√≥n

### Notificaciones (1)
- CU-19: Procesar Notificaci√≥n (Worker Outbox)

### Inteligencia Artificial (2)
- CU-20: Solicitar Sugerencias de IA para Categor√≠as
- CU-21: Analizar H√°bitos de Compra

### Blueprints/Plantillas (2)
- CU-22: Crear Blueprint
- CU-23: Usar Blueprint para Crear Lista

### Administraci√≥n (2)
- CU-24: Impersonar Usuario
- CU-25: Finalizar Impersonaci√≥n

### Auxiliares (2)
- CU-26: Obtener Tiendas Disponibles
- CU-27: Validar Enlaces de Invitaci√≥n (Proceso Autom√°tico)

üìÑ **[Ver casos de uso detallados](./Doc/casos-uso-completos.md)**

---

## üóìÔ∏è Estado del Proyecto - Progreso Actual

| Fase | Estado | Descripci√≥n | Casos de Uso |
|------|--------|-------------|--------------|
| **Fase 1** | ‚úÖ **COMPLETADA** | Setup y arquitectura base | - |
| **Fase 2** | ‚úÖ **COMPLETADA** | Autenticaci√≥n y gesti√≥n de usuarios | CU-01, CU-02 |
| **Fase 3** | ‚úÖ **COMPLETADA** | Gesti√≥n de listas | CU-03 a CU-06 |
| **Fase 4** | ‚úÖ **COMPLETADA** | Gesti√≥n de productos | CU-07 a CU-10 |
| **Fase 5** | ‚úÖ **COMPLETADA** | Gesti√≥n de categor√≠as y tiendas | CU-11 a CU-14, CU-26 |
| **Fase 6** | ‚úÖ **COMPLETADA** | Patr√≥n Outbox y RabbitMQ | CU-19 (base) |
| **Fase 7** | üîÑ **EN DESARROLLO** | Compartici√≥n de listas | CU-15 a CU-18 |
| **Fase 8** | ‚è≥ **PENDIENTE** | Notificaciones por email | CU-19 (completo) |
| **Fase 9** | ‚è≥ **PENDIENTE** | Integraci√≥n con IA | CU-20, CU-21 |
| **Fase 10** | ‚è≥ **PENDIENTE** | Blueprints/Plantillas | CU-22, CU-23 |
| **Fase 11** | ‚è≥ **PENDIENTE** | Funcionalidades de administrador | CU-24, CU-25 |
| **Fase 12** | ‚è≥ **PENDIENTE** | Validaci√≥n y seguridad | CU-27 |
| **Fase 13** | ‚è≥ **PENDIENTE** | Documentaci√≥n y testing final | - |

**Progreso:** 6/13 fases completadas **(46%)**  
**Tests:** 149/150 pasando **(99.3%)**  
**Arquitectura:** Hexagonal implementada ‚úÖ  
**Eventos:** Sistema robusto con Outbox pattern ‚úÖ

---

## üóìÔ∏è Roadmap de Desarrollo

El proyecto se desarrolla en **13 fases** a lo largo de **15 semanas**:

| Fase | Duraci√≥n | Descripci√≥n | Casos de Uso |
|------|----------|-------------|--------------|
| **Fase 1** | Semanas 1-2 | Setup y arquitectura base | - |
| **Fase 2** | Semana 3 | Autenticaci√≥n y gesti√≥n de usuarios | CU-01, CU-02 |
| **Fase 3** | Semana 4 | Gesti√≥n de listas | CU-03 a CU-06 |
| **Fase 4** | Semana 5 | Gesti√≥n de productos | CU-07 a CU-10 |
| **Fase 5** | Semana 6 | Gesti√≥n de categor√≠as y tiendas | CU-11 a CU-14, CU-26 |
| **Fase 6** | Semana 7 | Patr√≥n Outbox y RabbitMQ | CU-19 |
| **Fase 7** | Semana 8 | Compartici√≥n de listas | CU-15 a CU-18 |
| **Fase 8** | Semana 9 | Notificaciones por email | CU-19 |
| **Fase 9** | Semanas 10-11 | Integraci√≥n con IA | CU-20, CU-21 |
| **Fase 10** | Semana 12 | Blueprints/Plantillas | CU-22, CU-23 |
| **Fase 11** | Semana 13 | Funcionalidades de administrador | CU-24, CU-25 |
| **Fase 12** | Semana 14 | Validaci√≥n y seguridad | CU-27 |
| **Fase 13** | Semana 15 | Documentaci√≥n y testing final | - |

üìÑ **[Ver roadmap completo](./AGENTS-v2.md#roadmap-de-implementaci√≥n)**

---

## üß™ Testing

### Ejecutar tests

```bash
# Todos los tests
npm run test

# Tests en modo watch
npm run test:watch

# Tests con cobertura
npm run test:cov

# Solo tests unitarios
npm run test:unit

# Solo tests de integraci√≥n
npm run test:integration

# Solo tests E2E
npm run test:e2e
```

### Cobertura de Tests

El proyecto mantiene una cobertura m√≠nima del **80%** en todas las capas:

- ‚úÖ **Tests Unitarios**: Dominio y aplicaci√≥n
- ‚úÖ **Tests de Integraci√≥n**: Repositorios, HTTP, mensajer√≠a
- ‚úÖ **Tests E2E**: Flujos completos de usuario

---

## üìñ API Documentation

### Swagger UI

Una vez el servidor est√© corriendo, accede a la documentaci√≥n interactiva:

üëâ **http://localhost:3000/api-docs**

### Endpoints Principales

#### Autenticaci√≥n
```
POST   /api/auth/register          # Registrar usuario
POST   /api/auth/login             # Iniciar sesi√≥n
```

#### Listas
```
GET    /api/lists                  # Obtener listas del usuario
POST   /api/lists                  # Crear lista
GET    /api/lists/:id              # Obtener lista espec√≠fica
PUT    /api/lists/:id              # Actualizar lista
DELETE /api/lists/:id              # Eliminar lista
POST   /api/lists/:id/share        # Compartir lista
```

#### Productos
```
POST   /api/lists/:id/products     # A√±adir producto a lista
PATCH  /api/products/:id/purchased # Marcar como comprado
PUT    /api/products/:id           # Actualizar producto
DELETE /api/products/:id           # Eliminar producto
```

#### Categor√≠as
```
GET    /api/stores/:id/categories  # Obtener categor√≠as de tienda
POST   /api/categories             # Crear categor√≠a
PUT    /api/categories/:id         # Actualizar categor√≠a
DELETE /api/categories/:id         # Eliminar categor√≠a
```

#### IA
```
POST   /api/ai/category-suggestions  # Obtener sugerencias de categor√≠as
GET    /api/ai/habits-analysis       # An√°lisis de h√°bitos de compra
```

---

## ü§ù Contribuci√≥n

Este es un proyecto educativo, pero las contribuciones son bienvenidas. Si deseas colaborar:

1. Haz un fork del proyecto
2. Crea una rama para tu feature (`git checkout -b feature/nueva-funcionalidad`)
3. Commitea tus cambios (`git commit -am 'A√±ade nueva funcionalidad'`)
4. Push a la rama (`git push origin feature/nueva-funcionalidad`)
5. Abre un Pull Request

### Gu√≠as de Contribuci√≥n

- Sigue los principios SOLID
- Escribe tests para todo c√≥digo nuevo
- Mant√©n la cobertura >80%
- Documenta las funciones p√∫blicas
- Usa TypeScript strict mode
- Verifica que compila sin errores antes de commitear

---

## üìÑ Licencia

Este proyecto est√° bajo la Licencia MIT. Ver el archivo [LICENSE](LICENSE) para m√°s detalles.

---

## üë§ Autor

Desarrollado como proyecto educativo del **M√°ster de Desarrollo con IA de Big School** (Brais Moure).

---

## üôè Agradecimientos

- [Big School](https://bigschool.dev/) y Brais Moure por el m√°ster
- Comunidad de Node.js y TypeScript
- Autores de las librer√≠as utilizadas

---

## üìû Contacto y Soporte

- üìß Email: anthonymoles@hotmail.com
- üí¨ GitHub Issues: [Abrir issue](https://github.com/elkangri23/lista-compra-colaborativa/issues)
- üìö Documentaci√≥n adicional: Ver carpeta `./docs/`

---

## üîó Enlaces √ötiles

- [Documentaci√≥n de Node.js](https://nodejs.org/docs/)
- [Documentaci√≥n de TypeScript](https://www.typescriptlang.org/docs/)
- [Documentaci√≥n de Prisma](https://www.prisma.io/docs/)
- [Documentaci√≥n de RabbitMQ](https://www.rabbitmq.com/documentation.html)
- [Clean Architecture (Uncle Bob)](https://blog.cleancoder.com/uncle-bob/2012/08/13/the-clean-architecture.html)
- [Arquitectura Hexagonal](https://alistair.cockburn.us/hexagonal-architecture/)

---

‚≠ê Si este proyecto te result√≥ √∫til, considera darle una estrella en GitHub
